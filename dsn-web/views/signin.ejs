<!DOCTYPE html>
	<html>
		<head>
			<title> Please Sign up </title>
			<script src="http://code.jquery.com/jquery-1.11.1.js"/>
			<script src="http://code.jquery.com/jquery-2.1.1.js"/>
			<script src="http://code.jquery.com/jquery-migrate-1.2.1.js"></script>
		</head>
		<body>
			<form action="myFunction()">
				User Name :<input id="user_name" name="username" placeholder="Write your pseudo"/><br>
				Password : <input id="password" name="password" placeholder="write a password name"/><br>
			<input type="button" Value="Submit" onclick="myFunction()"/>
			<script>
				function myFunction(){
					console.log("requesting...");
					var inputUsername = document.getElementById('user_name');
					var inputPassword = document.getElementById('password');
					
					$.ajax({
						type: "POST",
						url: "http://dreamyday.tk:80/session/signin",
						data: {username: inputUsername.value, password: inputPassword.value},
						success: function(data, textStatus, jqXHR){
							console.log(data);
							console.log(textStatus);

							if (data.result == "success") {
								window.location = '/mainpage';
							}
						},
						error: function(xhRequest, ErrorText, thrownError) {
							console.log(xhRequest);
							console.log(ErrorText);
							console.log(thrownError);
						}
					})
					.done(function(msg){
						console.log("requested");
					});
				
				}

				function post(path, params, method) {
				    method = method || "post"; // Set method to post by default if not specified.

				    // The rest of this code assumes you are not using a library.
				    // It can be made less wordy if you use one.
				    var form = document.createElement("form");
				    form.setAttribute("method", method);
				    form.setAttribute("action", path);

				    for(var key in params) {
				        if(params.hasOwnProperty(key)) {
				            var hiddenField = document.createElement("input");
				            hiddenField.setAttribute("type", "hidden");
				            hiddenField.setAttribute("name", key);
				            hiddenField.setAttribute("value", params[key]);

				            form.appendChild(hiddenField);
				         }
				    }

				    document.body.appendChild(form);
				    form.submit();
				}
			</script>
			</form>
		</body>
	</html>