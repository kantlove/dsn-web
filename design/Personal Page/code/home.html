<!DOCTYPE html>
<html>
    <head>
        <title>Personal page</title>
        <link rel="stylesheet" type="text/css" href="styles.css"/>
        <script src="jquery-2.1.1.js" type="text/javascript"></script>
        <script src="jquery.easing.1.3.js" type="text/javascript"></script>
        <script>
$ = jQuery.noConflict();
$(document).ready(function(e) {
    var pageWidth = $(document).width(), pageHeight = $(document).height();
    console.log('pageW: ' + pageWidth, 'pageH: ' + pageHeight);

    /* arrange elements */
    arrangeElmts();
    $(window).resize(function() {
        arrangeElmts();
    });

    function arrangeElmts() {
        var pageWidth = $(document).width(), pageHeight = $(document).height();
        var posts = $('#userPosts');
        var itemList = $('.postItem');
        var totalH = 0, itemPadding = 10, margin = 50;
        // setting button
        var isSettingOpened = false;
        $('#settingBtn').click(function() {
            isSettingOpened == false? $('li.has-sub ul').css({visibility: 'visible'}) : $('li.has-sub ul').css({visibility: 'collapse'});
            isSettingOpened = !isSettingOpened;
        });

        // align the list
        posts.css({left: pageWidth / 4});

        // align each item
        $.each(itemList, function() {
            // 
            var comments = $(this).children('.commentList');
            
            // recalculate height
            var lastChild = $(this).children().last();
            var itemH = lastChild.position().top + lastChild.last().height() - 30;

            $(this).css({top: totalH});
            $(this).height(itemH + itemPadding * 2); // 10 is padding
            $(this).children('.postImg').width($(this).width() + itemPadding * 2);
            //console.log($(this).children('.postImg'));
            totalH += itemH + itemPadding * 2 + margin;
        });

        // align buttons on menu   
        var cnt = $('#avatarDiv').position().left + $('#avatarDiv').width();
        $.each($('#userMenu').children('button.userMenuItem'), function(idx, value) {
            $(value).css({left: cnt});
            cnt += $(value).width();
        });
        var followBtn = $('#followBtn');
        if(followBtn != null)
            followBtn.css({left: cnt + 100});

        posts.height(totalH);

        $('#bodyDiv').height(posts.height() + 60);
    }

});
        </script>
    </head>
    <body>
        <div id="bodyDiv"></div>
        <div id="topBar">
            <form method="get">
                <input id="search" type="text" placeholder="Search..."/>
                <button id="searchBtn" type="submit"></button>
            </form>     
            <li class='has-sub'><a href='#'><button id="settingBtn"></button></a>
                <ul>
                    <li><a href='#'><span>Account</span></a></li>
                    <div class="divider"></div>
                    <li><a href='#'><span>Logout</span></a></li>
                </ul>
            </li>
        </div>
        <div id="coverDiv"></div>

        <div id="userMenu">
            <button class="userMenuItem">Post</button>
            <button class="userMenuItem">Profile</button>
            <button class="userMenuItem">Photo</button>
            <button class="userMenuItem">Following</button>
            <button id="followBtn">Follow</button>
        </div>
        <div id="avatarDiv"></div>
        <div id="userPosts">
            <div id="post1" class="postItem">
                <div class="userImg"></div>
                <div class="postInfo">
                    <b class="posterName">Thai Minh</b> 
                    <div class="postDate">5 minutes ago</div>
                </div>

                <div class="postImg"></div>
                <div class="postContent">I dream a dream about something I dream a dream about something I dream a dream about something I dream a dream about something I dream a dream about something</div>
                <div class="postStat">
                    <span><a>120</a><img class="likeImg"/></span>
                    <span><a>10</a><img class="cmtImg"/></span>
                </div>
                <div class="divider2"></div>
                <div class="commentList">
                    <div class="commentItem">
                        <div class="cmtAvatar"></div>
                        <div class="cmtContent">
                            <div class="cmtPoster">To Huu Quan</div>
                            Good one!
                        </div>
                    </div>
                    <div class="commentItem">
                        <div class="cmtAvatar"></div>
                        <div class="cmtContent">
                            <div class="cmtPoster">To Huu Quan</div>Congratulation dude nice job hahah :D HUEHUEHUEHUEHUEHUEHUEHUEHUEHUE Good night keep calm and sleep zzZ</div>
                    </div>
                </div>
            </div>
            <div id="post2" class="postItem">
                <div class="userImg"></div>
                <div class="postInfo">
                    <b class="posterName">Thai Minh</b> 
                    <div class="postDate">Yesterday</div>
                </div>
                <div class="postContent">I dream a dream about something. This is the best thing ever. AHAHAHAHAHAHAHAHAHAHAHAH</div>
                <div class="postTags">
                    <a href="google.com">#bestdreamever</a>
                </div>
                <div class="postStat">
                    <span><a>120</a><img class="likeImg"/></span>
                    <span><a>10</a><img class="cmtImg"/></span>
                </div>
                <div class="divider2"></div>
                <div class="commentList">
                    <div class="commentItem">
                        <div class="cmtAvatar"></div>
                        <div class="cmtContent">
                            <div class="cmtPoster">To Huu Quan</div>g9 my love. We'll meet tomorrow I hope ^_^</div>
                    </div>
                </div>
<!--                <button class="expandBtn">View full story</button>-->
            </div>
            <div id="post3" class="postItem">
                <div class="userImg"></div>
                <div class="postInfo">
                    <b class="posterName">Thai Minh</b> 
                    <div class="postDate">12 December, 2013</div>
                </div>
                <div class="postContent">Hahahahahahah</div>
                <div class="postTags">
                    <a href="google.com">#crazyboy</a><a href="google.com">#relax</a><a href="google.com">#maniko</a>
                </div>
                <div class="postStat">
                    <span><a>120</a><img class="likeImg"/></span>
                    <span><a>10</a><img class="cmtImg"/></span>
                </div>
                
            </div>
        </div>
    </body>
</html>